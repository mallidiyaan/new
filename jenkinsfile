pipeline{
    agent any
    environment{
    DOCKERHUB CREDENTIALS = credentials(mallikarjunsahu-dockerhub)
    }
    stages{
       stage('scm checkout'){
          steps{
          git 'https://github.com/mallidiyaan/new.git'
          }
       }
       stage('build docker image'){
          steps{
             sh 'docker build . -t <mallikarjunsahu>/node-web-app'
          }
       }
       stage('login to dockerhub'){
          steps{
             sh 'pipeline syntax'
          }
       }
       stage('push image'){
          steps{
             sh 'docker push'
          }
       }
    }
    post{
        always{
           sh 'docker logout'
        }
    }
}
